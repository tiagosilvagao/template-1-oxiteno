!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module?module.exports=e():t.format=e()}(this,function(){return function(t,e){"use strict";if(!t||isNaN(+e))return e;var n,i,s,r,l=t.length,o=t.search(/[0-9\-\+#]/),f=0<o?t.substring(0,o):"",h=t.split("").reverse().join(""),g=h.search(/[0-9\-\+#]/),u=l-g,c=t.substring(u,1+u),d=u+("."===c||","===c?1:0),a=0<g?t.substring(d,l):"",p=(e="-"===(t=t.substring(o,d)).charAt(0)?-e:+e)<0?e=-e:0,g=(c=t.match(/[^\d\-\+#]/g))&&c[c.length-1]||".",b=c&&c[1]&&c[0]||",";if(t=t.split(g),e=+(e=e.toFixed(t[1]&&t[1].length))+"",o=t[1]&&t[1].lastIndexOf("0"),(!(s=e.split("."))[1]||s[1]&&s[1].length<=o)&&(e=(+e).toFixed(o+1)),o=t[0].split(b),t[0]=o.join(""),-1<(n=t[0]&&t[0].indexOf("0")))for(;s[0].length<t[0].length-n;)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");if((e=e.split("."))[0]=s[0],i=o[1]&&o[o.length-1].length){for(h="",u=(r=e[0]).length%i,l=r.length,d=0;d<l;d++)h+=r.charAt(d),!((d-u+1)%i)&&d<l-i&&(h+=b);e[0]=h}return e[1]=t[1]&&e[1]?g+e[1]:"",f+((p="0"===(c=e.join(""))||""===c?!1:p)?"-":"")+c+a}});